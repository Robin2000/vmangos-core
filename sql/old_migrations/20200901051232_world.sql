DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20200901051232');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20200901051232');
-- Add your query below.


-- Separate custom and blizzlike event script ids by splitting the table.
CREATE TABLE IF NOT EXISTS `temp_scripts` (
  `id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `delay` int(10) unsigned NOT NULL DEFAULT '0',
  `command` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `datalong` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `datalong2` int(10) unsigned NOT NULL DEFAULT '0',
  `datalong3` int(10) unsigned NOT NULL DEFAULT '0',
  `datalong4` int(10) unsigned NOT NULL DEFAULT '0',
  `target_param1` int(10) unsigned NOT NULL DEFAULT '0',
  `target_param2` int(10) unsigned NOT NULL DEFAULT '0',
  `target_type` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `data_flags` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `dataint` int(11) NOT NULL DEFAULT '0',
  `dataint2` int(11) NOT NULL DEFAULT '0',
  `dataint3` int(11) NOT NULL DEFAULT '0',
  `dataint4` int(11) NOT NULL DEFAULT '0',
  `x` float NOT NULL DEFAULT '0',
  `y` float NOT NULL DEFAULT '0',
  `z` float NOT NULL DEFAULT '0',
  `o` float NOT NULL DEFAULT '0',
  `condition_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `comments` varchar(255) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `temp_scripts` SELECT * FROM `event_scripts` WHERE `id` IN (102, 259, 264, 293, 294, 295, 312, 313, 364, 383, 384, 385, 413, 415, 416, 417, 420, 452, 462, 464, 465, 466, 467, 468, 498, 510, 524, 525, 601, 619, 663, 664, 691, 692, 693, 694, 727, 747, 898, 914, 1020, 1033, 1131, 1134, 1370, 1428, 1449, 1653, 1785, 1786, 1787, 1788, 2048, 2153, 2228, 2268, 2313, 2488, 2489, 2609, 2648, 2721, 2723, 2724, 2725, 2726, 2727, 2807, 2814, 2815, 2816, 2817, 2818, 2819, 2980, 2998, 3084, 3094, 3095, 3097, 3098, 3099, 3100, 3116, 3117, 3124, 3130, 3201, 3202, 3203, 3204, 3209, 3214, 3241, 3301, 3361, 3560, 3561, 3708, 3718, 3719, 3839, 3938, 3973, 3980, 3981, 4059, 4079, 4083, 4102, 4118, 4122, 4178, 4185, 4192, 4193, 4194, 4195, 4196, 4197, 4215, 4216, 4217, 4218, 4219, 4234, 4235, 4236, 4237, 4247, 4260, 4265, 4276, 4280, 4284, 4288, 4338, 4622, 4777, 4799, 4845, 4884, 4975, 5121, 5140, 5208, 5209, 5210, 5225, 5246, 5258, 5300, 5301, 5438, 5439, 5618, 5619, 5620, 5621, 5622, 5623, 5759, 5991, 6028, 6138, 6206, 6721, 7058, 7060, 7143, 7150, 7158, 7216, 7218, 7219, 7268, 7269, 7319, 7323, 7327, 7381, 7838, 8175, 8187, 8188, 8227, 8228, 8229, 8302, 8328, 8331, 8335, 8420, 8428, 8430, 8436, 8438, 8446, 8447, 8448, 8449, 8450, 8451, 8452, 8453, 8454, 8455, 8502, 8504, 8505, 8506, 8507, 8508, 8509, 8510, 8511, 8520, 8521, 8522, 8523, 8524, 8525, 8526, 8527, 8528, 8529, 8540, 8567, 8568, 8593, 8605, 8608, 8867, 8868, 8870, 8872, 8874, 8876, 8878, 8880, 8882, 8884, 9066, 9104, 9163, 9165, 9208, 9417, 9425, 9426, 9427, 9527, 9530, 9531, 9532, 9533, 9542, 9543, 9544, 9545, 9546, 9547, 9548, 9571, 9735, 9738, 9900, 10015, 10143, 10211, 10495, 10536, 10537, 10556, 10564, 10565, 10566, 10567, 10568, 10569, 10570, 10687, 10688, 10689, 10690, 10691, 10692, 10696, 10697, 10698, 10699, 10700, 10701, 10702, 10703, 10704, 10705, 11148, 11149, 11150, 11151, 11152, 11153, 11154, 11155, 13770);

DELETE FROM `event_scripts` WHERE `id` IN (102, 259, 264, 293, 294, 295, 312, 313, 364, 383, 384, 385, 413, 415, 416, 417, 420, 452, 462, 464, 465, 466, 467, 468, 498, 510, 524, 525, 601, 619, 663, 664, 691, 692, 693, 694, 727, 747, 898, 914, 1020, 1033, 1131, 1134, 1370, 1428, 1449, 1653, 1785, 1786, 1787, 1788, 2048, 2153, 2228, 2268, 2313, 2488, 2489, 2609, 2648, 2721, 2723, 2724, 2725, 2726, 2727, 2807, 2814, 2815, 2816, 2817, 2818, 2819, 2980, 2998, 3084, 3094, 3095, 3097, 3098, 3099, 3100, 3116, 3117, 3124, 3130, 3201, 3202, 3203, 3204, 3209, 3214, 3241, 3301, 3361, 3560, 3561, 3708, 3718, 3719, 3839, 3938, 3973, 3980, 3981, 4059, 4079, 4083, 4102, 4118, 4122, 4178, 4185, 4192, 4193, 4194, 4195, 4196, 4197, 4215, 4216, 4217, 4218, 4219, 4234, 4235, 4236, 4237, 4247, 4260, 4265, 4276, 4280, 4284, 4288, 4338, 4622, 4777, 4799, 4845, 4884, 4975, 5121, 5140, 5208, 5209, 5210, 5225, 5246, 5258, 5300, 5301, 5438, 5439, 5618, 5619, 5620, 5621, 5622, 5623, 5759, 5991, 6028, 6138, 6206, 6721, 7058, 7060, 7143, 7150, 7158, 7216, 7218, 7219, 7268, 7269, 7319, 7323, 7327, 7381, 7838, 8175, 8187, 8188, 8227, 8228, 8229, 8302, 8328, 8331, 8335, 8420, 8428, 8430, 8436, 8438, 8446, 8447, 8448, 8449, 8450, 8451, 8452, 8453, 8454, 8455, 8502, 8504, 8505, 8506, 8507, 8508, 8509, 8510, 8511, 8520, 8521, 8522, 8523, 8524, 8525, 8526, 8527, 8528, 8529, 8540, 8567, 8568, 8593, 8605, 8608, 8867, 8868, 8870, 8872, 8874, 8876, 8878, 8880, 8882, 8884, 9066, 9104, 9163, 9165, 9208, 9417, 9425, 9426, 9427, 9527, 9530, 9531, 9532, 9533, 9542, 9543, 9544, 9545, 9546, 9547, 9548, 9571, 9735, 9738, 9900, 10015, 10143, 10211, 10495, 10536, 10537, 10556, 10564, 10565, 10566, 10567, 10568, 10569, 10570, 10687, 10688, 10689, 10690, 10691, 10692, 10696, 10697, 10698, 10699, 10700, 10701, 10702, 10703, 10704, 10705, 11148, 11149, 11150, 11151, 11152, 11153, 11154, 11155, 13770);

RENAME TABLE `event_scripts` TO `generic_scripts`;

RENAME TABLE `temp_scripts` TO `event_scripts`;


-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
